import{s as e}from"./sax-1f0e83fa.js";function t(e,t){return t.forEach((function(t){t&&"string"!=typeof t&&!Array.isArray(t)&&Object.keys(t).forEach((function(n){if("default"!==n&&!(n in e)){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(e,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}}))})),Object.freeze(e)}var n,r,s=function(e){return Array.isArray?Array.isArray(e):"[object Array]"===Object.prototype.toString.call(e)},i=s,a={copyOptions:function(e){var t,n={};for(t in e)e.hasOwnProperty(t)&&(n[t]=e[t]);return n},ensureFlagExists:function(e,t){e in t&&"boolean"==typeof t[e]||(t[e]=!1)},ensureSpacesExists:function(e){(!("spaces"in e)||"number"!=typeof e.spaces&&"string"!=typeof e.spaces)&&(e.spaces=0)},ensureAlwaysArrayExists:function(e){"alwaysArray"in e&&("boolean"==typeof e.alwaysArray||i(e.alwaysArray))||(e.alwaysArray=!1)},ensureKeyExists:function(e,t){e+"Key"in t&&"string"==typeof t[e+"Key"]||(t[e+"Key"]=t.compact?"_"+e:e)},checkFnExists:function(e,t){return e+"Fn"in t}},u=e,o=a,c=s;function y(e){var t=Number(e);if(!isNaN(t))return t;var n=e.toLowerCase();return"true"===n||"false"!==n&&e}function l(e,t){var s;if(n.compact){if(!r[n[e+"Key"]]&&(c(n.alwaysArray)?-1!==n.alwaysArray.indexOf(n[e+"Key"]):n.alwaysArray)&&(r[n[e+"Key"]]=[]),r[n[e+"Key"]]&&!c(r[n[e+"Key"]])&&(r[n[e+"Key"]]=[r[n[e+"Key"]]]),e+"Fn"in n&&"string"==typeof t&&(t=n[e+"Fn"](t,r)),"instruction"===e&&("instructionFn"in n||"instructionNameFn"in n))for(s in t)if(t.hasOwnProperty(s))if("instructionFn"in n)t[s]=n.instructionFn(t[s],s,r);else{var i=t[s];delete t[s],t[n.instructionNameFn(s,i,r)]=i}c(r[n[e+"Key"]])?r[n[e+"Key"]].push(t):r[n[e+"Key"]]=t}else{r[n.elementsKey]||(r[n.elementsKey]=[]);var a={};if(a[n.typeKey]=e,"instruction"===e){for(s in t)if(t.hasOwnProperty(s))break;a[n.nameKey]="instructionNameFn"in n?n.instructionNameFn(s,t,r):s,n.instructionHasAttributes?(a[n.attributesKey]=t[s][n.attributesKey],"instructionFn"in n&&(a[n.attributesKey]=n.instructionFn(a[n.attributesKey],s,r))):("instructionFn"in n&&(t[s]=n.instructionFn(t[s],s,r)),a[n.instructionKey]=t[s])}else e+"Fn"in n&&(t=n[e+"Fn"](t,r)),a[n[e+"Key"]]=t;n.addParent&&(a[n.parentKey]=r),r[n.elementsKey].push(a)}}function p(e){var t;if("attributesFn"in n&&e&&(e=n.attributesFn(e,r)),(n.trim||"attributeValueFn"in n||"attributeNameFn"in n||n.nativeTypeAttributes)&&e)for(t in e)if(e.hasOwnProperty(t)&&(n.trim&&(e[t]=e[t].trim()),n.nativeTypeAttributes&&(e[t]=y(e[t])),"attributeValueFn"in n&&(e[t]=n.attributeValueFn(e[t],t,r)),"attributeNameFn"in n)){var s=e[t];delete e[t],e[n.attributeNameFn(t,e[t],r)]=s}return e}function m(e){var t={};if(e.body&&("xml"===e.name.toLowerCase()||n.instructionHasAttributes)){for(var s,i=/([\w:-]+)\s*=\s*(?:"([^"]*)"|'([^']*)'|(\w+))\s*/g;null!==(s=i.exec(e.body));)t[s[1]]=s[2]||s[3]||s[4];t=p(t)}if("xml"===e.name.toLowerCase()){if(n.ignoreDeclaration)return;r[n.declarationKey]={},Object.keys(t).length&&(r[n.declarationKey][n.attributesKey]=t),n.addParent&&(r[n.declarationKey][n.parentKey]=r)}else{if(n.ignoreInstruction)return;n.trim&&(e.body=e.body.trim());var a={};n.instructionHasAttributes&&Object.keys(t).length?(a[e.name]={},a[e.name][n.attributesKey]=t):a[e.name]=e.body,l("instruction",a)}}function f(e,t){var s;if("object"==typeof e&&(t=e.attributes,e=e.name),t=p(t),"elementNameFn"in n&&(e=n.elementNameFn(e,r)),n.compact){var i;if(s={},!n.ignoreAttributes&&t&&Object.keys(t).length)for(i in s[n.attributesKey]={},t)t.hasOwnProperty(i)&&(s[n.attributesKey][i]=t[i]);!(e in r)&&(c(n.alwaysArray)?-1!==n.alwaysArray.indexOf(e):n.alwaysArray)&&(r[e]=[]),r[e]&&!c(r[e])&&(r[e]=[r[e]]),c(r[e])?r[e].push(s):r[e]=s}else r[n.elementsKey]||(r[n.elementsKey]=[]),(s={})[n.typeKey]="element",s[n.nameKey]=e,!n.ignoreAttributes&&t&&Object.keys(t).length&&(s[n.attributesKey]=t),n.alwaysChildren&&(s[n.elementsKey]=[]),r[n.elementsKey].push(s);s[n.parentKey]=r,r=s}function g(e){n.ignoreText||(e.trim()||n.captureSpacesBetweenElements)&&(n.trim&&(e=e.trim()),n.nativeType&&(e=y(e)),n.sanitize&&(e=e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")),l("text",e))}function K(e){n.ignoreComment||(n.trim&&(e=e.trim()),l("comment",e))}function b(e){var t=r[n.parentKey];n.addParent||delete r[n.parentKey],r=t}function x(e){n.ignoreCdata||(n.trim&&(e=e.trim()),l("cdata",e))}function d(e){n.ignoreDoctype||(e=e.replace(/^ /,""),n.trim&&(e=e.trim()),l("doctype",e))}function F(e){e.note=e}var E=function(e,t){var s=u.parser(!0,{}),i={};if(r=i,n=function(e){return n=o.copyOptions(e),o.ensureFlagExists("ignoreDeclaration",n),o.ensureFlagExists("ignoreInstruction",n),o.ensureFlagExists("ignoreAttributes",n),o.ensureFlagExists("ignoreText",n),o.ensureFlagExists("ignoreComment",n),o.ensureFlagExists("ignoreCdata",n),o.ensureFlagExists("ignoreDoctype",n),o.ensureFlagExists("compact",n),o.ensureFlagExists("alwaysChildren",n),o.ensureFlagExists("addParent",n),o.ensureFlagExists("trim",n),o.ensureFlagExists("nativeType",n),o.ensureFlagExists("nativeTypeAttributes",n),o.ensureFlagExists("sanitize",n),o.ensureFlagExists("instructionHasAttributes",n),o.ensureFlagExists("captureSpacesBetweenElements",n),o.ensureAlwaysArrayExists(n),o.ensureKeyExists("declaration",n),o.ensureKeyExists("instruction",n),o.ensureKeyExists("attributes",n),o.ensureKeyExists("text",n),o.ensureKeyExists("comment",n),o.ensureKeyExists("cdata",n),o.ensureKeyExists("doctype",n),o.ensureKeyExists("type",n),o.ensureKeyExists("name",n),o.ensureKeyExists("elements",n),o.ensureKeyExists("parent",n),n}(t),s.opt={strictEntities:!0},s.onopentag=f,s.ontext=g,s.oncomment=K,s.onclosetag=b,s.onerror=F,s.oncdata=x,s.ondoctype=d,s.onprocessinginstruction=m,s.write(e).close(),i[n.elementsKey]){var a=i[n.elementsKey];delete i[n.elementsKey],i[n.elementsKey]=a,delete i.text}return i},h=a,v=E;var A,w,O=a,j=s;function T(e,t,n){return(!n&&e.spaces?"\n":"")+Array(t+1).join(e.spaces)}function N(e,t,n){if(t.ignoreAttributes)return"";"attributesFn"in t&&(e=t.attributesFn(e,w,A));var r,s,i,a,u=[];for(r in e)e.hasOwnProperty(r)&&null!==e[r]&&void 0!==e[r]&&(a=t.noQuotesForNativeAttributes&&"string"!=typeof e[r]?"":'"',s=(s=""+e[r]).replace(/"/g,"&quot;"),i="attributeNameFn"in t?t.attributeNameFn(r,s,w,A):r,u.push(t.spaces&&t.indentAttributes?T(t,n+1,!1):" "),u.push(i+"="+a+("attributeValueFn"in t?t.attributeValueFn(s,r,w,A):s)+a));return e&&Object.keys(e).length&&t.spaces&&t.indentAttributes&&u.push(T(t,n,!1)),u.join("")}function k(e,t,n){return A=e,w="xml",t.ignoreDeclaration?"":"<?xml"+N(e[t.attributesKey],t,n)+"?>"}function C(e,t,n){if(t.ignoreInstruction)return"";var r;for(r in e)if(e.hasOwnProperty(r))break;var s="instructionNameFn"in t?t.instructionNameFn(r,e[r],w,A):r;if("object"==typeof e[r])return A=e,w=s,"<?"+s+N(e[r][t.attributesKey],t,n)+"?>";var i=e[r]?e[r]:"";return"instructionFn"in t&&(i=t.instructionFn(i,r,w,A)),"<?"+s+(i?" "+i:"")+"?>"}function P(e,t){return t.ignoreComment?"":"\x3c!--"+("commentFn"in t?t.commentFn(e,w,A):e)+"--\x3e"}function D(e,t){return t.ignoreCdata?"":"<![CDATA["+("cdataFn"in t?t.cdataFn(e,w,A):e.replace("]]>","]]]]><![CDATA[>"))+"]]>"}function S(e,t){return t.ignoreDoctype?"":"<!DOCTYPE "+("doctypeFn"in t?t.doctypeFn(e,w,A):e)+">"}function I(e,t){return t.ignoreText?"":(e=(e=(e=""+e).replace(/&amp;/g,"&")).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;"),"textFn"in t?t.textFn(e,w,A):e)}function _(e,t,n,r){return e.reduce((function(e,s){var i=T(t,n,r&&!e);switch(s.type){case"element":return e+i+function(e,t,n){A=e,w=e.name;var r=[],s="elementNameFn"in t?t.elementNameFn(e.name,e):e.name;r.push("<"+s),e[t.attributesKey]&&r.push(N(e[t.attributesKey],t,n));var i=e[t.elementsKey]&&e[t.elementsKey].length||e[t.attributesKey]&&"preserve"===e[t.attributesKey]["xml:space"];return i||(i="fullTagEmptyElementFn"in t?t.fullTagEmptyElementFn(e.name,e):t.fullTagEmptyElement),i?(r.push(">"),e[t.elementsKey]&&e[t.elementsKey].length&&(r.push(_(e[t.elementsKey],t,n+1)),A=e,w=e.name),r.push(t.spaces&&function(e,t){var n;if(e.elements&&e.elements.length)for(n=0;n<e.elements.length;++n)switch(e.elements[n][t.typeKey]){case"text":if(t.indentText)return!0;break;case"cdata":if(t.indentCdata)return!0;break;case"instruction":if(t.indentInstruction)return!0;break;default:return!0}return!1}(e,t)?"\n"+Array(n+1).join(t.spaces):""),r.push("</"+s+">")):r.push("/>"),r.join("")}(s,t,n);case"comment":return e+i+P(s[t.commentKey],t);case"doctype":return e+i+S(s[t.doctypeKey],t);case"cdata":return e+(t.indentCdata?i:"")+D(s[t.cdataKey],t);case"text":return e+(t.indentText?i:"")+I(s[t.textKey],t);case"instruction":var a={};return a[s[t.nameKey]]=s[t.attributesKey]?s:s[t.instructionKey],e+(t.indentInstruction?i:"")+C(a,t,n)}}),"")}function V(e,t,n){var r;for(r in e)if(e.hasOwnProperty(r))switch(r){case t.parentKey:case t.attributesKey:break;case t.textKey:if(t.indentText||n)return!0;break;case t.cdataKey:if(t.indentCdata||n)return!0;break;case t.instructionKey:if(t.indentInstruction||n)return!0;break;case t.doctypeKey:case t.commentKey:default:return!0}return!1}function H(e,t,n,r,s){A=e,w=t;var i="elementNameFn"in n?n.elementNameFn(t,e):t;if(null==e||""===e)return"fullTagEmptyElementFn"in n&&n.fullTagEmptyElementFn(t,e)||n.fullTagEmptyElement?"<"+i+"></"+i+">":"<"+i+"/>";var a=[];if(t){if(a.push("<"+i),"object"!=typeof e)return a.push(">"+I(e,n)+"</"+i+">"),a.join("");e[n.attributesKey]&&a.push(N(e[n.attributesKey],n,r));var u=V(e,n,!0)||e[n.attributesKey]&&"preserve"===e[n.attributesKey]["xml:space"];if(u||(u="fullTagEmptyElementFn"in n?n.fullTagEmptyElementFn(t,e):n.fullTagEmptyElement),!u)return a.push("/>"),a.join("");a.push(">")}return a.push(J(e,n,r+1,!1)),A=e,w=t,t&&a.push((s?T(n,r,!1):"")+"</"+i+">"),a.join("")}function J(e,t,n,r){var s,i,a,u=[];for(i in e)if(e.hasOwnProperty(i))for(a=j(e[i])?e[i]:[e[i]],s=0;s<a.length;++s){switch(i){case t.declarationKey:u.push(k(a[s],t,n));break;case t.instructionKey:u.push((t.indentInstruction?T(t,n,r):"")+C(a[s],t,n));break;case t.attributesKey:case t.parentKey:break;case t.textKey:u.push((t.indentText?T(t,n,r):"")+I(a[s],t));break;case t.cdataKey:u.push((t.indentCdata?T(t,n,r):"")+D(a[s],t));break;case t.doctypeKey:u.push(T(t,n,r)+S(a[s],t));break;case t.commentKey:u.push(T(t,n,r)+P(a[s],t));break;default:u.push(T(t,n,r)+H(a[s],i,t,n,V(a[s],t)))}r=r&&!u.length}return u.join("")}var z=function(e,t){t=function(e){var t=O.copyOptions(e);return O.ensureFlagExists("ignoreDeclaration",t),O.ensureFlagExists("ignoreInstruction",t),O.ensureFlagExists("ignoreAttributes",t),O.ensureFlagExists("ignoreText",t),O.ensureFlagExists("ignoreComment",t),O.ensureFlagExists("ignoreCdata",t),O.ensureFlagExists("ignoreDoctype",t),O.ensureFlagExists("compact",t),O.ensureFlagExists("indentText",t),O.ensureFlagExists("indentCdata",t),O.ensureFlagExists("indentAttributes",t),O.ensureFlagExists("indentInstruction",t),O.ensureFlagExists("fullTagEmptyElement",t),O.ensureFlagExists("noQuotesForNativeAttributes",t),O.ensureSpacesExists(t),"number"==typeof t.spaces&&(t.spaces=Array(t.spaces+1).join(" ")),O.ensureKeyExists("declaration",t),O.ensureKeyExists("instruction",t),O.ensureKeyExists("attributes",t),O.ensureKeyExists("text",t),O.ensureKeyExists("comment",t),O.ensureKeyExists("cdata",t),O.ensureKeyExists("doctype",t),O.ensureKeyExists("type",t),O.ensureKeyExists("name",t),O.ensureKeyExists("elements",t),t}(t);var n=[];return A=e,w="_root_",t.compact?n.push(J(e,t,0,!0)):(e[t.declarationKey]&&n.push(k(e[t.declarationKey],t,0)),e[t.elementsKey]&&e[t.elementsKey].length&&n.push(_(e[t.elementsKey],t,0,!n.length))),n.join("")},B=z,L=function(e,t){var n,r,s;return n=function(e){var t=h.copyOptions(e);return h.ensureSpacesExists(t),t}(t),r=v(e,n),s="compact"in n&&n.compact?"_parent":"parent",("addParent"in n&&n.addParent?JSON.stringify(r,(function(e,t){return e===s?"_":t}),n.spaces):JSON.stringify(r,null,n.spaces)).replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")},Q=function(e,t){e instanceof Buffer&&(e=e.toString());var n=null;if("string"==typeof e)try{n=JSON.parse(e)}catch(e){throw new Error("The JSON structure is invalid")}else n=e;return B(n,t)},q={xml2js:E,xml2json:L,js2xml:z,json2xml:Q},Y=t({__proto__:null,default:q},[q]);export{Y as convert};
